<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="user-scalable=no">
    <link rel="icon" href="icon/icon.png" type="image/png">
    <link rel="apple-touch-icon" href="icon/icon.png">
    <link rel="stylesheet" type="text/css" href="fonts/gamefont.css">
    <title>Bitz Fantasy</title>
</head>

<body style="background-color: black">
    <div id="debug-console"
        style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9999999; background: rgba(0,0,0,0.8); color: #ff5555; overflow: auto; display: none; white-space: pre-wrap; font-family: monospace; padding: 10px; pointer-events: auto;">
    </div>
    <script>
        (function () {
            var debugConsole = document.getElementById('debug-console');
            window.logError = function (msg) {
                debugConsole.style.display = 'block';
                debugConsole.innerHTML += msg + '\n----------------\n';
                console.error(msg);
            };

            function wrap(func, context) {
                if (typeof func !== 'function') return func;
                return function () {
                    try {
                        return func.apply(context || this, arguments);
                    } catch (e) {
                        window.logError("Trapped Error: " + e.message + "\nStack: " + e.stack);
                        throw e;
                    }
                };
            }

            // Wrap setTimeout
            var _setTimeout = window.setTimeout;
            window.setTimeout = function (func, delay) {
                return _setTimeout(wrap(func), delay);
            };

            // Wrap setInterval
            var _setInterval = window.setInterval;
            window.setInterval = function (func, delay) {
                return _setInterval(wrap(func), delay);
            };

            // Wrap addEventListener
            var _addEventListener = EventTarget.prototype.addEventListener;
            EventTarget.prototype.addEventListener = function (type, listener, options) {
                return _addEventListener.call(this, type, wrap(listener, this), options);
            };

            window.onerror = function (msg, url, line, col, error) {
                var extra = !col ? '' : (', col: ' + col);
                extra += !error ? '' : ('\n' + error.stack);
                window.logError("Global Error: " + msg + "\nurl: " + url + "\nline: " + line + extra);
                return false;
            };
            window.onunhandledrejection = function (e) {
                window.logError("Unhandled Rejection: " + (e.reason ? (e.reason.stack || e.reason) : e.reason));
            };
        })();
    </script>
    <script type="text/javascript" src="js/libs/pixi.js"></script>
    <script type="text/javascript" src="js/libs/pixi-tilemap.js"></script>
    <script type="text/javascript" src="js/libs/pixi-picture.js"></script>
    <script type="text/javascript" src="js/libs/fpsmeter.js"></script>
    <script type="text/javascript" src="js/libs/lz-string.js"></script>
    <!-- <script type="text/javascript" src="js/libs/iphone-inline-video.browser.js"></script> -->
    <script type="text/javascript" src="js/rpg_core.js"></script>
    <script type="text/javascript" src="js/rpg_managers.js"></script>
    <script type="text/javascript" src="js/rpg_objects.js"></script>
    <script type="text/javascript" src="js/rpg_scenes.js"></script>
    <script type="text/javascript" src="js/rpg_sprites.js"></script>
    <script type="text/javascript" src="js/rpg_windows.js"></script>
    <script type="text/javascript" src="js/plugins.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
</body>

</html>